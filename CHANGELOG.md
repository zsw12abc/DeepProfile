# DeepProfile 开发进展与更新日志

## 当前版本: v0.4.0 (开发中)

### 🚀 核心更新 (v0.4.0) - 历史记录与缓存系统

#### ⚡ 性能与体验
- [ ] **本地缓存机制**: 
    - 自动将分析生成的用户画像存储在本地 (`chrome.storage.local`)。
    - 实现 `HistoryService`，管理数据的存取与过期。
    - 默认缓存有效期为 24 小时，过期自动失效。
- [ ] **秒级响应**: 
    - 再次访问已分析用户时，直接从缓存加载结果，无需等待 API 请求。
    - **零 Token 消耗**: 命中缓存时不调用 LLM 接口，节省成本。

#### 🛠️ 管理与交互
- [ ] **历史记录管理**:
    - 在设置页面新增“历史记录”面板。
    - 支持查看所有已分析的用户列表（按时间排序）。
    - 支持一键清除所有缓存或删除单条记录。
- [ ] **强制刷新**:
    - 在分析结果卡片上增加“重新分析”按钮，允许用户忽略缓存强制更新。

---

## 版本历史

### v0.3.0 (2024-01-04) - 精准聚焦与体验优化
*   **Major Feature**: **重构上下文感知算法**，使用话题标签进行精准匹配，并采用动态截断策略，彻底解决话题跑偏问题。
*   **Major Feature**: **重构 Prompt**，使用“价值取向”代替“政治倾向”，规避国产模型风控，并要求 AI 解释矛盾点。
*   **Feature**: **新增“连接测试”功能**，提供友好的中文错误提示。
*   **Feature**: **动态加载模型列表**，将模型名称输入框升级为下拉选择框。
*   **Feature**: 新增对**通义千问 (Qwen)** 和**自定义 OpenAI 兼容接口**的支持。
*   **Feature**: 数据源增加**用户点赞动态**，并能在 Debug 面板中展示来源比例。
*   **Fix**: 优先提取并分析回答/文章的**完整正文**，而非简短摘要。
*   **UI**: 设置页面 UI 现代化，采用卡片式布局。

### v0.2.0 (2024-01-03) - 深度分析与上下文感知
*   **Feature**: 新增上下文感知功能，根据当前浏览的问题自动筛选用户相关回答。
*   **Feature**: 新增“分析模式”设置 (极速/平衡/深度)，深度模式支持识别反讽。
*   **Feature**: 画像标签新增置信度概率展示。
*   **Feature**: Debug 模式增强，显示话题分类和抓取策略。
*   **Fix**: 优化注入逻辑，精准定位昵称右侧，排除头像干扰。
*   **Fix**: 修复引用链接为 API 格式的问题，统一为网页链接。

### v0.1.0 (2024-01-02) - MVP 发布
*   **Feature**: 完成基础架构 (Plasmo + React + TypeScript)。
*   **Feature**: 实现知乎 API 抓取与清洗。
*   **Feature**: 对接 OpenAI/Gemini/Ollama 接口。
*   **Feature**: 实现基础 UI 注入与画像展示卡片。
*   **Feature**: 支持 API Key 配置。

---

## 📅 待办计划 (Roadmap)

- [ ] **历史记录**: 本地保存已分析过的用户画像 (v0.4.0)。
- [ ] **批量分析**: 在评论区支持一键分析多人。
- [ ] **导出功能**: 支持将画像导出为图片或 Markdown。
- [ ] **更多平台**: 探索支持 Reddit、Bilibili、微博等其他平台。
